function outvec = simPA5setatten(invec, atten_val)
%--------------------------------------------------------------------------
% outvec = simPA5setatten(invec, atten)
%--------------------------------------------------------------------------
% NICal program
% TytoLogy Project
% initializes nidaq system
%------------------------------------------------------------------------
% Input Arguments:
% 	invec				vector to be attenuated
%	atten_val		atten value in dB
% 
% Output Arguments:
% 	outvec	attenuated vector
%------------------------------------------------------------------------
% See also: NICal
%------------------------------------------------------------------------

%--------------------------------------------------------------------------
% Sharad J Shanbhag
% sshanbhag@neomed.edu
%--------------------------------------------------------------------------
% Created: 9 July 2012 (SJS)
% 
% Revisions:
%--------------------------------------------------------------------------

%------------------------------------------------------------------------
%------------------------------------------------------------------------
% Make sure input args are in bounds
%------------------------------------------------------------------------
%------------------------------------------------------------------------
% bounds
ATT_MAX = 120;
ATT_MIN = 0;

if ~between(atten_val, ATT_MIN, ATT_MAX)
	warning('%s: atten_val %d out of range 0-120 dB', mfilename, atten_val);
	atten_val = ATT_MAX;
end

%------------------------------------------------------------------------
%------------------------------------------------------------------------
% compute linear atten val
%------------------------------------------------------------------------
%------------------------------------------------------------------------
linear_atten = invdb(-1*atten_val);


outvec = linear_atten * invec;
